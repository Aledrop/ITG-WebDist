"use strict";(self["webpackChunkiristravel_v3"]=self["webpackChunkiristravel_v3"]||[]).push([[83],{6271:function(e,t,r){r.d(t,{Z:function(){return T}});var o=r(3396),a=r(7139),i=r(9242);const s=e=>((0,o.dD)("data-v-27e4afde"),e=e(),(0,o.Cn)(),e),l={class:"flex flex-col md:flex-row w-11/12 md:w-9/12 border border-white bg-white"},n={class:"w-72"},c=["src"],d={class:"flex flex-col justify-between p-5 gap-4 md:gap-0 w-full md:w-8/12"},p={class:"flex flex-row justify-between"},u={class:"col-span-1 gap-5 justify-between"},m={class:"flex flex-col text-left"},h=["textContent"],_=s((()=>(0,o._)("span",{class:"text-light_gray_1 text-left uppercase text-sm"},"CATEGORÍA",-1))),f={class:"grid col-span-1 gap-10 md:gap-5 md:mb-5"},g={class:"flex flex-col"},b=["textContent"],x=s((()=>(0,o._)("span",{class:"text-light_gray_1 uppercase font-DIN-Regular text-sm text-right"},"TRANSMISIÓN",-1))),w={key:0,class:"flex flex-col md:flex-row gap-5 mt-5 items-end md:justify-end"},y={class:"flex bg-white text-gray-700 w-64"},D={class:"border border-gray-200 flex flex-col md:w-1/4 justify-center items-center gap-5 py-5"},v={class:"flex flex-col"},k={class:"fa fa-spinner fa-pulse text-gray-500"},Y={class:"text-orange_1 font-DIN-Bold text-3xl"},P=s((()=>(0,o._)("i",{class:"fa fa-usd"},null,-1))),C={class:"text-light_gray_1"},M={class:"text-light_gray_1"},B=["disabled"];function I(e,t,r,s,I,N){const S=(0,o.up)("Datepicker");return(0,o.wg)(),(0,o.iD)("article",l,[(0,o._)("figure",n,[(0,o._)("img",{src:r.item.image,alt:"",class:"bg-cover"},null,8,c)]),(0,o._)("section",d,[(0,o._)("div",p,[(0,o._)("div",u,[(0,o._)("div",m,[(0,o._)("span",{class:"text-blue_1 uppercase font-DIN-Bold text-xl text-left",textContent:(0,a.zw)(r.item.car_category.alias)},null,8,h),_])]),(0,o._)("div",f,[(0,o._)("div",g,[(0,o._)("span",{class:"text-blue_1 uppercase font-DIN-Bold text-sm text-right",textContent:(0,a.zw)(r.item.car_engine.alias)},null,8,b),x])])]),r.search?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",w,[(0,o._)("div",y,[(0,o.Wm)(S,{class:"datepicker-container",placeholder:"Fecha de recogida y entrega",modelValue:I.car.dateRange,"onUpdate:modelValue":[t[0]||(t[0]=e=>I.car.dateRange=e),N.handleDate],format:"dd/MM/yyyy",range:"","multi-calendars":"","auto-apply":"","enable-time-picker":!1,"close-on-auto-apply":!0},null,8,["modelValue","onUpdate:modelValue"])]),(0,o._)("button",{class:"bg-orange_1 py-2 font-DIN-Bold w-36 border hover:bg-white hover:text-orange_1 hover:border-orange_1",onClick:t[1]||(t[1]=e=>N.getPrice())},"Buscar")]))]),(0,o._)("section",D,[(0,o._)("div",v,[(0,o.wy)((0,o._)("i",k,null,512),[[i.F8,I.loadingPrices]]),(0,o.wy)((0,o._)("span",Y,[P,(0,o.Uk)((0,a.zw)(I.price),1)],512),[[i.F8,!I.loadingPrices]]),(0,o.wy)((0,o._)("span",C,"Por día",512),[[i.F8,this.isPriceTextoByDay&&!this.search]]),(0,o.wy)((0,o._)("span",M,"Precio total",512),[[i.F8,!this.isPriceTextoByDay||this.search]])]),(0,o._)("button",{class:(0,a.C_)([{"btn-disbled":I.btnDisabled},"bg-white py-2 font-DIN-Bold w-36 border hover:bg-dark_blue_1 hover:text-white text-dark_blue_1 border-dark_blue_1"]),disabled:I.btnDisabled,onClick:t[2]||(t[2]=e=>N.goRequest())},"Enviar Solicitud",10,B)])])}r(7658);var N=r(6797),S=r.n(N),q=r(9024),F=r(809),R={name:"CarListTemplate",props:{item:[],index:{type:Number},not_found:{type:Boolean,default:!1},params:{},search:{type:Boolean,default:!1}},components:{Datepicker:q.Z},data(){return{price:0,pricePerDay:0,loadingPrices:!1,isSelected:!1,isPriceTextoByDay:!0,btnDisabled:!1,car:{dateRange:{},dateString:null,dates:""},select_style_opt:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border border-blue_1 bg-white text-base leading-snug outline-none",search:"w-full absolute inset-0 outline-none focus:ring-0 appearance-none box-border border-8 border-transparent text-base font-sans bg-white pl-2 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center w-full h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-400 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",optionSelected:"text-gray-700 bg-light_gray_1"}}},created(){if(this.updPrice(),!this.search)return;const e=JSON.parse(localStorage.getItem("searchform"));e&&"car"===e.type&&this.handleDate([e.date_start,e.date_out])},methods:{formatDate(){return{from:S()(this.car.dates.from,"DD-MM-YYYY").format("YYYY-MM-DD"),to:S()(this.car.dates.to,"DD-MM-YYYY").format("YYYY-MM-DD")}},goRequest(){if(localStorage.removeItem("request_info"),!this.validateForm()&&!this.search)return this.showErrorFormValidation();if(!this.isSelected&&!this.search)return this.showErrorFormValidation("Debe pulsar el boton buscar");if(this.btnDisabled)return this.showErrorFormValidation("El producto no tiene precio asociado, no puede ser seleccionado");{this.isSelected=!1;const e={type:"car",destination:"Cuba",country:"Cuba",pole:"Cuba",product:"Car",product_id:this.item.id,product_name:this.item.alias,initprice:this.item.price_from||0,is_home_request:!1,prod:[],price:this.price,date:this.car.dates.from+" / "+this.car.dates.to,date_start:this.formatDate().from,date_out:this.formatDate().to,car_category:this.item.car_category,car_engine:this.item.car_engine};e.prod.push({adults:1,price:this.pricePerDay,price_adult:this.pricePerDay,product_id:this.item.car_category.id,type:this.item.car_category.alias}),localStorage.setItem("request_info",JSON.stringify(e)),this.$router.push({name:"SendRequest"})}},async calcPrice(){this.loadingPrices=!0;const e={};e.date_from=this.formatDate().from,e.date_to=this.formatDate().to,e.car_category_id=this.item.car_category.id,e.car_engine_id=this.item.car_engine.id,e.auth="bearer";let t=this.price;const r=await F.Z.checkLogin("/search/car/prices",e,"post").then((e=>{if(!e.data)throw this.btnDisabled=!0,this.price=t,console.log(e),"Error";if(0!==e.data.length)return this.btnDisabled=!1,this.isPriceTextoByDay=!1,e.data;this.btnDisabled=!0,this.isPriceTextoByDay=!0,this.price=t,this.$swal({title:"Información",text:`Esta categoria de autos no tiene precio para el rango de fechas ${S()(this.car.dates.from,"DD/MM/YYYY").format("DD/MM/YYYY")} - ${S()(this.car.dates.to,"DD/MM/YYYY").format("DD/MM/YYYY")}, intente con otro`,icon:"info",confirmButtonColor:"#3085d6"})})).catch((e=>{this.$swal({title:"Error",text:e||"Ocurrio un error!!!",icon:"error",confirmButtonColor:"#3085d6"})}));r?(this.price=r[0].totalPrice,this.pricePerDay=r[0].pricePerDay):this.price=t,this.loadingPrices=!1},getPrice(){this.validateForm()?(this.isSelected=!0,this.calcPrice()):this.showErrorFormValidation()},validateForm(){return!!this.car.dates},handleProductFilter(e){this.product_list=e},handleDate(e){this.car.dateRange={},e&&(this.car.dateRange=e,this.car.dates={from:S()(e[0]).format("DD-MM-YYYY"),to:S()(e[1]).format("DD-MM-YYYY")})},updPrice(){return this.price?this.price:this.item.totalPrice?this.price=this.item.totalPrice:this.price=this.item.price_from||0},showError(e){e=e||"Ocurrio un error!",this.$swal({title:"Error",text:e,icon:"error",confirmButtonColor:"#3085d6"})},showErrorFormValidation(e){e=e||"Debe seleccionar las opciones requeridas antes de seleccionar un auto!",this.$swal({title:"Validación de formulario",text:e,icon:"warning",confirmButtonColor:"#3085d6"})}}},z=r(89);const E=(0,z.Z)(R,[["render",I],["__scopeId","data-v-27e4afde"]]);var T=E},7771:function(e,t,r){r.d(t,{Z:function(){return v}});var o=r(3396),a=r(7139);const i=e=>((0,o.dD)("data-v-6637ec70"),e=e(),(0,o.Cn)(),e),s={class:"flex flex-col w-9/12"},l={key:0,class:"flex flex-col md:flex-row gap-x-3 md:gap-y-0 gap-y-3"},n=["src"],c={class:"w-full flex gap-3"},d={class:"uppercase text-left text-base font-DIN-Bold md:text-2xl"},p={class:"text-left py-2"},u={class:"text-orange_1 text-xlfont-DIN-Bold md:text-2xl"},m={class:"w-2/12 ml-auto md:block hidden"},h=["src"],_=i((()=>(0,o._)("small",{class:"text-red bg-pink-300 px-10 hidden"},"Debe marcar al menos una habitación",-1))),f={key:1};function g(e,t,r,i,g,b){const x=(0,o.up)("stars"),w=(0,o.up)("hotel-table-price");return(0,o.wg)(),(0,o.iD)("article",s,[b.is_search?((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("figure",{class:(0,a.C_)(["md:w-4/12 border-8 border-white",{"md:mb-3":b.combinations.length>0}])},[(0,o._)("img",{class:"bg-cover img-product",src:r.item.image,alt:""},null,8,n)],2),(0,o._)("div",{class:(0,a.C_)(["md:w-8/12 flex flex-col gap-3 border-t-2 border-l-2 border-r-2 border-white p-2",{"border-b-2":0==b.combinations.length}])},[(0,o._)("div",c,[(0,o._)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>b.goProduct&&b.goProduct(...e)),class:"flex flex-col gap-3 pl-2"},[(0,o._)("h3",d,(0,a.zw)(r.item.alias),1),(0,o.Wm)(x,{star_init:r.item.stars},null,8,["star_init"]),(0,o._)("small",p,[(0,o.Uk)("Desde "),(0,o._)("b",u," $"+(0,a.zw)(r.item.price_from),1),(0,o.Uk)(" "+(0,a.zw)(r.item.per_pax?"[por persona / la noche]":"[pax por habitación]"),1)])]),(0,o._)("figure",m,[(0,o._)("img",{src:r.item.img,alt:""},null,8,h)])]),_,(0,o._)("div",{class:(0,a.C_)(["flex flex-col md:flex-row gap-y-3 mt-auto mx-3 mb-3",{"justify-around":b.combinations.length>0}])},[(0,o._)("button",{class:"uppercase font-DIN-Bold border border-orange_1 text-orange_1 px-8 py-1 hover:bg-orange_1 hover:text-blue_1 mt-auto",onClick:t[1]||(t[1]=e=>b.goProduct(r.item.keyword))},"ver mas"),b.combinations.length>0?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"uppercase font-DIN-Bold border border-white text-white px-8 py-1 hover:bg-white hover:text-blue_1 mt-auto",onClick:t[2]||(t[2]=e=>b.goProduct(r.item.keyword))},"Enviar solicitud")):(0,o.kq)("",!0)],2)],2)])):(0,o.kq)("",!0),b.combinations.length>0?((0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(w,{rooms:b.combinations},null,8,["rooms"])])):(0,o.kq)("",!0)])}r(7658);var b=r(4024),x=r(1287),w={name:"ProductListTemplate",props:{not_found:{type:Boolean,default:!1},item:Object,index:Number,params:Object},components:{Stars:b.Z,HotelTablePrice:x.Z},created(){},data(){return{results:[]}},computed:{combinations(){const e=[];return"comb"in this.params&&this.params.comb.map(((t,r)=>{e.length-1<r&&e.push([]);for(let o of this.item.rooms)o.combination.map((a=>{a&&a[0].adults_quantity==t.adults&&a[0].children_quantity==t.children&&a[0].infants_quantity==t.infants&&e[r].push({room_id:o.room_id,room:o.name,prices:o.total_prices[r],num_night:a.length-1,comb:t})}))})),e},is_search(){return!this.not_found||this.combinations.length>0}},methods:{goProduct(e="iberostar-laguna-azul"){this.$router.push({name:"ProductDetail",params:{poleKey:this.params.poleKey,productKey:this.params.productKey,keyword:e}})}}},y=r(89);const D=(0,y.Z)(w,[["render",g],["__scopeId","data-v-6637ec70"]]);var v=D},1287:function(e,t,r){r.d(t,{Z:function(){return M}});var o=r(3396),a=r(7139),i=r(9242);const s=(0,o._)("i",{class:"far fa-hand-point-up"},null,-1),l=(0,o._)("i",{class:"far fa-hand-point-up"},null,-1),n={class:"flex items-center bg-white text-blue_1 px-2 mt-2"},c={key:0,class:"w-2/4 md:w-1/3 text-left"},d=(0,o._)("b",{class:"md:inline block"},"Habitación: ",-1),p=(0,o._)("span",{class:"w-1/3 text-center md:block hidden"},[(0,o._)("b",null,"Pax por noche")],-1),u={class:"w-2/4 md:w-1/3 text-center"},m=(0,o._)("b",null,"Total de noches: ",-1),h={class:"w-2/4 md:w-1/3 text-left"},_=["name","value","onClick"],f={class:"w-1/3 grid grid-cols-1 gap-x-2 justify-center"},g={class:"text-orange_1"},b=(0,o._)("b",{class:"text-white"},"Adulto",-1),x={key:0,class:"text-orange_1"},w=(0,o._)("b",{class:"text-white"},"Niño",-1),y=(0,o._)("b",null,"Free",-1),D=(0,o._)("b",{class:"text-white"},"Niño",-1),v={class:"w-2/4 md:w-1/3 text-center text-orange_1 text-xl"};function k(e,t,r,k,Y,P){return(0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["border-white p-3",r.borderType])},[(0,o.wy)((0,o._)("span",{class:"cursor-pointer underline",onClick:t[0]||(t[0]=(...e)=>P.scrollSearcher&&P.scrollSearcher(...e))},[s,(0,o.Uk)(" Realice una busqueda para ver los nuestros precios "),l],512),[[i.F8,0==r.rooms.length]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.rooms,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"w-full flex flex-col gap-y-1 justify-start",key:t},[(0,o._)("div",n,[e.length>0?((0,o.wg)(),(0,o.iD)("span",c,[d,(0,o.Uk)(" "+(0,a.zw)(0==e[0].comb.adults?"":e[0].comb.adults>1?e[0].comb.adults+" adultos":"1 adulto")+" "+(0,a.zw)(0==e[0].comb.children?"":e[0].comb.children>1?e[0].comb.children+" niños":"1 niño"),1)])):(0,o.kq)("",!0),p,(0,o._)("span",u,[m,(0,o.Uk)((0,a.zw)(e.length>0?e[0].num_night:""),1)])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,((e,r)=>((0,o.wg)(),(0,o.iD)("div",{class:"flex items-center px-2",key:r},[(0,o._)("span",h,[(0,o._)("input",{type:"radio",name:"hotel_room"+t,value:e.room_id,onClick:e=>P.selectedRooms({rindex:t,index:r})},null,8,_),(0,o.Uk)(" "+(0,a.zw)(e.room),1)]),(0,o._)("div",f,[(0,o._)("span",g,[b,(0,o.Uk)(" $"+(0,a.zw)(e.prices.price_per_adults),1)]),e.comb.children>0?((0,o.wg)(),(0,o.iD)("span",x,[0===e.prices.price_per_children?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[w,y],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[D,(0,o._)("b",null," $"+(0,a.zw)(e.prices.price_per_children),1)],64))])):(0,o.kq)("",!0)]),(0,o._)("span",v,[(0,o._)("b",null,"$"+(0,a.zw)(e.prices.total_price),1)])])))),128))])))),128))],2)}r(7658);var Y={name:"HotelTablePrice",props:{rooms:{default:[]},index:{typeof:Number},borderType:{default:"border-l-2 border-r-2 border-b-2"}},data(){return{rooms_info:[]}},watch:{rooms(){if(this.rooms.length&&this.rooms[0].length>0)for(let e of this.rooms){const t={comb:e[0].comb,rooms:[]};for(let r of e)t.rooms.push({id:r.room_id,name:r.room,price:r.prices.total_price,price_child:r.prices.price_per_children,price_adult:r.prices.price_per_adults,active:!1});this.rooms_info.push(t)}}},methods:{selectedRooms({rindex:e,index:t}){let r=[];if(console.log(this.rooms_info),console.log(this.rindex),console.log(this.index),console.log(this.rooms),console.log(this),this.rooms_info){this.rooms_info[e].rooms.map((e=>e.active=!1)),this.rooms_info[e].rooms[t].active=!0;for(let e of this.rooms_info){let t=e.rooms.filter((e=>e.active));t[0]&&(t=t[0],t.comb=e.comb,r=[...r,t])}}this.$emit("updRoomRequest",r)},scrollSearcher(){this.$emit("scrollInto")}}},P=r(89);const C=(0,P.Z)(Y,[["render",k]]);var M=C}}]);
//# sourceMappingURL=83.03e7a1e7.js.map