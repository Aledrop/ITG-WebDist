"use strict";(self["webpackChunkiristravel_v3"]=self["webpackChunkiristravel_v3"]||[]).push([[295],{4128:function(e,t,a){a(7658);var o=a(809);const s={async getSearchInfo(){try{const e=await this.getHotels(),t=await this.getDestinations();return{hotels:e||[],destinations:t||[]}}catch(e){console.log(e)}},async getHotels(e){try{const t=void 0==e?"/hotels":`/hotels/by-pole/${e}`,a=[],s=await o.Z.checkLogin(t);if(s&&200==s.status)for(let e of s.data)a.push({label:e.alias,value:e.id});return a}catch(t){console.log(t)}},async getDestinations(){try{const{status:e,data:t}=await o.Z.checkLogin("/poles");if(200==e){const e=[];for(let a of t)e.push({label:a.alias,value:a.id});return e}}catch(e){console.log(e)}},async getOffers(){try{const e=await o.Z.checkLogin("/offers"),t=[];if(e){if(200!==e.status)return{success:!1,errors:"Fail check login"};for(let a of e.data)if(a.active){const e={id:a.id,name:a.title,keyword:a.keyword,description:a.description,info:a.info,price:a.price_from,country:"Cuba",btn:"contactar"};if("image"in a&&a.image[0])for(let t of a.image[0].resources)"original"===t.image&&(e.img=t.url);t.push(e)}}return t}catch(e){console.log(e)}}};t["Z"]=s},5295:function(e,t,a){a.d(t,{Z:function(){return A}});var o=a(3396),s=a(7139),r=a(9242);const l=e=>((0,o.dD)("data-v-a597a4d4"),e=e(),(0,o.Cn)(),e),i={class:"pb-12"},n={class:"container md:w-5/12 relative pt-10 m-auto"},d=l((()=>(0,o._)("i",{class:"fa fa-search"},null,-1))),c={key:0,class:"fa fa-times"};function u(e,t,a,l,u,m){const h=(0,o.up)("hotel-searcher"),p=(0,o.up)("tab"),f=(0,o.up)("car-searcher"),g=(0,o.up)("tabs");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",n,[(0,o._)("div",{onClick:t[0]||(t[0]=e=>u.visible=!u.visible),class:"flex gap-x-3 justify-center items-center w-[90%] lg:w-[70%] border-[1pt] border-blue_1 cursor-pointer text-lg text-blue_1 m-auto py-2 md:text-xl"},[d,(0,o._)("h1",null,(0,s.zw)(a.title),1),u.visible?((0,o.wg)(),(0,o.iD)("i",c)):(0,o.kq)("",!0)]),(0,o.wy)((0,o.Wm)(g,{options:{disableScrollBehavior:!0},class:"bg-blue_1 text-white border border-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"Hotel"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{onUpdparams:m.updSearch},null,8,["onUpdparams"])])),_:1}),(0,o.Wm)(p,{name:"Auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{onUpdparams:m.updSearch},null,8,["onUpdparams"])])),_:1})])),_:1},512),[[r.F8,u.visible]])])])}var m=a(5277);const h=e=>((0,o.dD)("data-v-c324f652"),e=e(),(0,o.Cn)(),e),p={class:"flex flex-col gap-y-3 text-center"},f={class:"w-full text-white flex flex-col justify-around items-center gap-6 md:flex-row"},g={class:"relative w-11/12 border border-white text-base py-4 mt-auto md:px-6 md:py-2"},b={class:"flex flex-col items-center justify-around gap-x-2 md:flex-row"},D=h((()=>(0,o._)("i",{class:"fas fa-door-open"},null,-1))),y=h((()=>(0,o._)("i",{class:"fa fa-user"},null,-1))),_=h((()=>(0,o._)("i",{class:"fas fa-edit"},null,-1))),v=[_],w=h((()=>(0,o._)("div",{class:"px-6 pt-4 md:ml-auto"},[(0,o._)("button",{type:"submit",class:"px-12 py-1 text-xl text-white uppercase bg-orange_1",value:"buscar"},"Buscar")],-1)));function x(e,t,a,r,l,i){const n=(0,o.up)("Multiselect"),d=(0,o.up)("Datepicker"),c=(0,o.up)("stars"),u=(0,o.up)("num-person");return(0,o.wg)(),(0,o.iD)("form",{id:"searchForm",class:"visible-form w-full border border-white text-base tracking-wider shadow-2xl font-semibold m-auto p-4 bg-white text-gray-700",onSubmit:t[5]||(t[5]=(...e)=>i.formSubmit&&i.formSubmit(...e))},[(0,o._)("div",p,[(0,o.Wm)(n,{modelValue:l.formData.destination,"onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.destination=e),mode:"single",searchable:!0,options:l.destinations,placeholder:"Seleccione destino",classes:l.select_style_opt,onSelect:i.updHotelOptions},null,8,["modelValue","options","classes","onSelect"]),(0,o.Wm)(n,{modelValue:l.formData.hotel,"onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.hotel=e),mode:"single",searchable:!0,options:l.hotels,disabled:e.disabled,classes:l.select_style_opt,placeholder:"Seleccione el hotel (opcional)"},null,8,["modelValue","options","disabled","classes"]),(0,o.Wm)(d,{class:"datepicker-container",placeholder:"Fecha de entrada y salida",modelValue:l.date,"onUpdate:modelValue":[t[2]||(t[2]=e=>l.date=e),i.handleDate],format:"dd/MM/yyyy",range:"","multi-calendars":"","auto-apply":"","enable-time-picker":!1,"close-on-auto-apply":!0},null,8,["modelValue","onUpdate:modelValue"]),(0,o._)("div",f,[(0,o.Wm)(c,{onGetStar:i.updStar,star_init:l.formData.stars,star_style:"block"},null,8,["onGetStar","star_init"]),(0,o._)("div",g,[(0,o._)("div",b,[D,(0,o._)("span",null,(0,s.zw)(l.noRooms)+" Habitacion ",1),y,(0,o._)("span",null,(0,s.zw)(i.numperson)+" Personas ",1),(0,o._)("div",{class:"cursor-pointer text-orange_1 text-xl md:ml-auto",onClick:t[3]||(t[3]=e=>l.visible_person=!l.visible_person)},v)]),(0,o._)("div",{id:"rooms",class:(0,s.C_)(["absolute right-0 top-50 bg-white text-dark_gray_1 border-light_gray_1 px-3",{"visible-numperson":l.visible_person}])},[(0,o.Wm)(u,{r:this.formData.rooms,onClose:t[4]||(t[4]=e=>l.visible_person=!1),onAddRoom:i.updNumRooms,onSubRoom:i.updNumRooms},null,8,["r","onAddRoom","onSubRoom"])],2)])])]),w],32)}a(7658);var S=a(4128),Y=a(6797),R=a.n(Y),k=a(9810),M=a(2078),V=a(4024),Z=a(9024),C=a(809);const W={async getSearchInfo(){try{const e=await this.getHotels(),t=await this.getDestinations();return{hotels:e||[],destinations:t||[]}}catch(e){console.log(e)}},async getHotels(e){try{const t=void 0==e?"/hotels":`/hotels/by-pole/${e}`,a=[],o=await C.Z.checkLogin(t);if(o&&200==o.status)for(let e of o.data)a.push({label:e.alias,value:e.id});return a}catch(t){console.log(t)}},async getDestinations(){try{const{status:e,data:t}=await C.Z.checkLogin("/poles");if(200==e){const e=[];for(let a of t)e.push({label:a.alias,value:a.id});return e}}catch(e){console.log(e)}},async searchByParam(e){e.auth="bearer",C.Z.checkLogin("/search/hotels/prices",e,"post").then((e=>{e&&(this.product_list=e.data,this.product_list.map((e=>{e.segment={name:"playa",img:a(4594)}})))}))}};var H=W,U={name:"HotelSearcher",props:{title:{require:!1,default:"Busca vacaciones a la medida",disabled:!0}},components:{Multiselect:k.Z,NumPerson:M.Z,Stars:V.Z,Datepicker:Z.Z},data(){return{activeTerm:!1,visible:!0,visible_person:!1,default_date:"20-01-022 ~ 20-02-2022",select_style_opt:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border border-blue_1 bg-white text-base leading-snug outline-none",search:"w-full absolute inset-0 outline-none focus:ring-0 appearance-none box-border border-8 border-transparent text-base font-sans bg-white pl-2 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center w-full h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-400 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",optionSelected:"text-white bg-light_gray_1"},date:{},formData:{type:"hotel",rooms:[{adults:1,children:0,infants:0}],dateRange:{startDate:R()().add(3,"days").format("DD MMM YYYY"),endDate:R()().add(4,"days").format("DD MMM YYYY")},destination:{value:"",label:""},hotel:{value:"",label:""},stars:3},destinations:[],hotels:[],noRooms:1}},created(){this.init()},computed:{numperson(){let e=0;for(let t of this.formData.rooms)e+=t.adults+t.children;return e}},methods:{async init(){const e=JSON.parse(localStorage.getItem("searchform"));if(this.destinations=await H.getDestinations(),this.hotels=await H.getHotels(),e&&"hotel"===e.type){this.date=[new Date(R()(e.dateRange.startDate)),new Date(R()(e.dateRange.endDate))],this.formData.dateRange=[e.dateRange.startDate,e.dateRange.endDate],this.formData.destination=e.destination,this.formData.hotel=e.hotel,this.formData.stars=e.stars,this.formData.rooms=[],this.noRooms=e.rooms.length;for(let t of e.rooms)this.formData.rooms.push({adults:t.adults,children:t.children,infants:t.infants})}},formSubmit(e){e.preventDefault(),localStorage.removeItem("searchform"),this.formData.dateRange[0]&&this.formData.dateRange[1]||(this.formData.dateRange[0]=R()(this.date[0]).format("YYYY-MM-DD"),this.formData.dateRange[1]=R()(this.date[1]).format("YYYY-MM-DD")),this.formData.dates=R()(this.date[0]).format("DD-MM-YYYY")+" / "+R()(this.date[1]).format("DD-MM-YYYY"),localStorage.setItem("searchform",JSON.stringify(this.formData)),"/resultado-de-busqueda"!==this.$route.fullPath?this.$router.push({name:"SearchResult"}):this.$emit("updparams")},handleDate(e){e&&(this.date=e,this.formData.dateRange=[R()(this.date[0]).format("YYYY-MM-DD"),R()(this.date[1]).format("YYYY-MM-DD")])},updStar(e){this.formData.starts=e},updNumRooms(e){"add"===e.action?this.formData.rooms.push({adults:1,children:0,infants:0}):"del"===e.action&&this.formData.rooms.splice(e.pos,1),this.noRooms=this.formData.rooms.length},updHotelOptions(e){this.formData.destination=e,S.Z.getHotels(e).then((e=>{0===e.length?this.disabled=!0:this.disabled=!1,this.formData.hotel={},this.hotels=[],this.hotels=e}))}}},I=a(89);const $=(0,I.Z)(U,[["render",x],["__scopeId","data-v-c324f652"]]);var N=$;const O=e=>((0,o.dD)("data-v-316fcab1"),e=e(),(0,o.Cn)(),e),B={class:"flex flex-col gap-y-3 text-center"},q=O((()=>(0,o._)("div",{class:"px-6 pt-4 md:ml-auto"},[(0,o._)("button",{type:"submit",class:"px-12 py-1 text-xl text-white uppercase bg-orange_1",value:"buscar"},"Buscar")],-1)));function F(e,t,a,s,r,l){const i=(0,o.up)("Multiselect"),n=(0,o.up)("Datepicker");return(0,o.wg)(),(0,o.iD)("form",{id:"searchForm",class:"visible-form w-full border border-white text-base tracking-wider shadow-2xl font-semibold m-auto p-4 bg-white text-gray-700",onSubmit:t[3]||(t[3]=(...e)=>l.formSubmit&&l.formSubmit(...e))},[(0,o._)("div",B,[(0,o.Wm)(i,{mode:"single",searchable:!0,modelValue:r.formData.category,"onUpdate:modelValue":t[0]||(t[0]=e=>r.formData.category=e),options:r.categories,classes:r.select_style_opt,placeholder:"Categoría"},null,8,["modelValue","options","classes"]),(0,o.Wm)(i,{mode:"single",searchable:!0,modelValue:r.formData.engine,"onUpdate:modelValue":t[1]||(t[1]=e=>r.formData.engine=e),options:r.enginies,classes:r.select_style_opt,placeholder:"Tipo de motor"},null,8,["modelValue","options","classes"]),(0,o.Wm)(n,{class:"datepicker-container bg-white text-left",placeholder:"Fecha de entrada y salida",modelValue:r.formData.dateRange,"onUpdate:modelValue":[t[2]||(t[2]=e=>r.formData.dateRange=e),l.handleDate],format:"dd/MM/yyyy",range:"","multi-calendars":"","auto-apply":"",required:"","enable-time-picker":!1,"close-on-auto-apply":!0},null,8,["modelValue","onUpdate:modelValue"])]),q],32)}var L=a(5607),j={name:"CarSearcher",components:{Multiselect:k.Z,Datepicker:Z.Z},data(){return{dateRange:{},formData:{category:"",engine:"",price:null,date:{}},categories:[],enginies:[],select_style_opt:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border border-blue_1 bg-white text-base leading-snug outline-none",search:"w-full absolute inset-0 outline-none focus:ring-0 appearance-none box-border border-8 border-transparent text-base font-sans bg-white pl-2 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center w-full h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-400 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",optionSelected:"text-white bg-light_gray_1"}}},props:{},computed:{},created(){this.init()},methods:{async init(){this.categories=await L.Z.getCategories(),this.enginies=await L.Z.getEnginies();const e=JSON.parse(localStorage.getItem("searchform"));e&&"car"===e.type&&(this.formData.category=e.car_category_id,this.formData.engine=e.car_engine_id,this.formData.dateRange=[e.date_start,e.date_out])},validateDatepicker(){if(this.car.dateRange)return!0;{let e=e||"Debe seleccionar un rango de fecha!";return this.$swal({title:"Validación de formulario",text:e,icon:"warning",confirmButtonColor:"#3085d6"}),!1}},formSubmit(e){e.preventDefault(),localStorage.removeItem("searchform");const t={};this.formData.category&&""!==this.formData.category&&(t.car_category_id=this.formData.category),this.formData.engine&&""!==this.formData.engine&&(t.car_engine_id=this.formData.engine),t.date_start=this.formData.date[0],t.date_out=this.formData.date[1],t.type="car",t.product="car",localStorage.setItem("searchform",JSON.stringify(t)),"/resultado-de-busqueda"!=this.$route.fullPath?this.$router.push({name:"SearchResult"}):this.$emit("updparams")},handleDate(e){this.dateRange={},this.dateRange=e,this.formData.date=[R()(e[0]).format("YYYY-MM-DD"),R()(e[1]).format("YYYY-MM-DD")]}}};const P=(0,I.Z)(j,[["render",F],["__scopeId","data-v-316fcab1"]]);var T=P,J={name:"TabsSearch",props:{title:{require:!1,default:"Busca vacaciones a la medida",disabled:!0}},components:{Tabs:m.mQ,Tab:m.OK,HotelSearcher:N,CarSearcher:T},data(){return{product:"hotel",visible:!1}},created(){this.init()},computed:{},methods:{init(){},updSearch(){this.$emit("updparams")}}};const z=(0,I.Z)(J,[["render",u],["__scopeId","data-v-a597a4d4"]]);var A=z}}]);
//# sourceMappingURL=295.1eef7c13.js.map